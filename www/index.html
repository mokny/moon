<!DOCTYPE html>
<html>
<head>
<title>Client</title>
<script src="js/client.js" lang="JavaScript"></script>
</head>
<body>
    asd
    <button onclick="client.send('AUTH','asd')">AUTH</button>
    <button onclick="client.send('rmp','asd')">TEST</button>

    <script>
        var client;

        function onConnect(event) {
            console.log("Connected");
        }

        function onDisconnect(event) {
            console.log("Disconnected");
        }

        function onReConnect(cnt) {
            console.log("Reconnecting...Try #" + cnt);
        }

        function onReConnectFailed() {
            console.log("Reconnect failed. No more retries.");
        }

        function onLatencyChanged(measuredby, latency) {
            console.log('Latency measured by '+ measuredby + ': ' + latency + 'ms');
        }

        function onMessage(method, payload) {
            console.log("Message");
            console.log(method + ' ' +  payload);
        }


        window.addEventListener("DOMContentLoaded", () => {
            client = new Client("ws://192.168.178.5:9002/");
            client.setMaxReconnects(10);
            client.setReconnectDelay(2000);
            client.setOnConnectHandler(onConnect);
            client.setOnDisconnectHandler(onDisconnect);
            client.setOnMessageHandler(onMessage);
            client.setOnReconnectHandler(onReConnect);
            client.setOnReconnectFailedHandler(onReConnectFailed);
            client.setOnLatencyChangedHandler(onLatencyChanged);
            client.connect();            
        });         
    </script>    
</body>

</html>